{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const refs = {\n    gallery: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    form: document.querySelector(\".form\"),\n  input: document.querySelector(\".form\").elements[\"search-text\"],\n  loadMoreBtn: document.querySelector(\".load-more\")\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250\n});\n\n\n\nexport function createGallery(images) {\n    const markup = images.map(img => {\n        return `\n      <li class=\"gallery-item\">\n  <div class=\"gallery-foto\">\n    <a href=\"${img.largeImageURL}\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n    </a>\n  </div>\n\n  <ul class=\"info\">\n    <li class=\"gallery-info\">\n      <span class=\"gallery-message\">Likes</span> ${img.likes}\n    </li>\n    <li class=\"gallery-info\">\n      <span class=\"gallery-message\">Views</span> ${img.views}\n    </li>\n    <li class=\"gallery-info\">\n      <span class=\"gallery-message\">Comments</span> ${img.comments}\n    </li>\n    <li class=\"gallery-info\">\n      <span class=\"gallery-message\">Downloads</span> ${img.downloads}\n    </li>\n  </ul>\n</li>`;\n    }).join(\"\");\n\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = \"\";   \n}\n\nexport function showLoader() {\n    refs.loader.classList.remove(\"hidden\");   \n}\n\nexport function hideLoader() {\n    refs.loader.classList.add(\"hidden\");      \n}\n\nexport function showLoadMoreBtn() {\n  refs.loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreBtn() {\n  refs.loadMoreBtn.classList.add(\"hidden\")\n}","import axios from \"axios\";\n\nconst API_KEY = \"53521476-959e2edb95accc90458c283c4\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: PER_PAGE,\n        page,\n    };\n\n    const response = await axios.get(BASE_URL, { params });\n    return response.data\n    \n    \n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { refs } from \"./js/render-functions.js\";\n\nimport { \n  createGallery, \n  clearGallery, \n  showLoader, \n  hideLoader,\n  showLoadMoreBtn,\n  hideLoadMoreBtn\n} from \"./js/render-functions.js\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\n\nrefs.form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    query = refs.input.value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.error({\n            message: \"Please enter a search term!\",\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreBtn();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        if (data.hits.length === 0) {\n            iziToast.warning({\n                message: \"Sorry, no images found.Try another search!\",\n                position: \"topRight\",\n            });\n            return\n        }\n\n        totalHits = data.totalHits;\n        createGallery(data.hits);\n\n        if (data.hits.length < totalHits) {\n            showLoadMoreBtn();\n        }\n    } catch {\n        iziToast.error({\n            message: \"Something went wrong. Please try again later\",\n            position: \"topRight\",\n        });\n       \n    } finally {\n        hideLoader();\n    }\n\n});\n\nrefs.loadMoreBtn.addEventListener(\"click\", async ()=> {\n    page += 1;\n    \n    showLoader();\n    hideLoadMoreBtn();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n\n        const card = refs.gallery.firstElementChild.getBoundingClientRect().height;\n        window.scrollBy({\n            top: card * 2,\n            behavior: \"smooth\",\n        });\n\n        const alreadyLoaded = page * 15;\n        if (alreadyLoaded >= totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            return;\n        }\n        showLoadMoreBtn();\n    }\n\n    catch {\n        iziToast.error({\n            message: \"Something went wrong.\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n\n})\n"],"names":["refs","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","totalHits","e","iziToast","data","card"],"mappings":"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"}